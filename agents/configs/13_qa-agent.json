{
  "id": "qa-agent",
  "name": "QA Engineer",
  "role": "Thoroughly tests code for functionality, security, performance, and accessibility before approval",
  "version": "1.0.0",
  
  "systemPrompt": {
    "file": "agents/prompts/qa-agent.md",
    "variables": {
      "test_coverage_minimum": "80%",
      "testing_types": "unit, integration, e2e, security, accessibility",
      "project_type": "${PROJECT_TYPE}",
      "specialization_context": "${file:agents/specializations/${PROJECT_TYPE}/qa-context.md}"
    }
  },
  
  "model": {
    "provider": "anthropic",
    "name": "claude-sonnet-4-20250514",
    "temperature": 0.3,
    "maxTokens": 8000
  },
  
  "tools": [
    "filesystem",
    "github",
    "code_execution"
  ],
  
  "toolConfigs": {
    "github": {
      "token": "${GITHUB_TOKEN}",
      "defaultRepo": "${GITHUB_REPO}",
      "createComments": true,
      "approvePRs": true,
      "requestChanges": true
    },
    "code_execution": {
      "timeout": 120,
      "allowedLanguages": ["javascript", "typescript", "shell"]
    }
  },
  
  "memory": {
    "enabled": true,
    "type": "persistent",
    "scope": "project",
    "maxItems": 200,
    "rememberAcrossSessions": true,
    "contextIncludes": [
      "Previous bugs found",
      "Testing patterns",
      "Edge cases discovered",
      "Regression issues"
    ]
  },
  
  "collaboration": {
    "canReceiveFrom": ["developer-agent", "em-agent"],
    "canSendTo": ["developer-agent", "em-agent", "devops-agent"],
    "handoffPoints": [
      "tests_complete",
      "approved",
      "rejected",
      "changes_requested"
    ],
    "notifyOn": {
      "approved": ["em-agent", "devops-agent"],
      "rejected": ["developer-agent", "em-agent"],
      "critical_bug": ["em-agent"],
      "security_issue": ["em-agent"]
    }
  },
  
  "inputs": {
    "required": [
      "Pull Request"
    ],
    "optional": [
      "docs/implementation/PLAN.md",
      "GitHub Issue (slice spec)",
      "Test plan"
    ]
  },
  
  "outputs": {
    "primary": "Test Report",
    "artifacts": [
      "Bug Reports (if any)",
      "PR Review Comments",
      "Test Coverage Report",
      "Performance Report",
      "Accessibility Report",
      "Security Report"
    ]
  },
  
  "triggers": {
    "manual": true,
    "automated": [
      "pr_created",
      "pr_updated",
      "retest_requested"
    ]
  },
  
  "behavior": {
    "thorough": true,
    "skeptical": true,
    "documentEverything": true,
    "failFast": false,
    "checkAllEdgeCases": true,
    "testLikeUser": true
  },
  
  "testingWorkflow": {
    "phase1_codeReview": {
      "description": "Review code before testing",
      "checks": [
        "Code quality",
        "Best practices",
        "Security issues",
        "Performance issues",
        "Type safety"
      ],
      "duration": "10-15 minutes"
    },
    "phase2_unitTests": {
      "description": "Verify unit tests exist and pass",
      "requirements": {
        "coverage": "80% minimum",
        "allPathsTested": true,
        "edgeCasesTested": true,
        "mockingAppropriate": true
      }
    },
    "phase3_integrationTests": {
      "description": "Test component interactions",
      "focus": [
        "Component integration",
        "API integration",
        "Database integration",
        "State management"
      ]
    },
    "phase4_functionalTests": {
      "description": "Test user-facing functionality",
      "approach": "User perspective",
      "checks": [
        "Happy path works",
        "Error cases handled",
        "Loading states correct",
        "Empty states present",
        "Success messages shown"
      ]
    },
    "phase5_e2eTests": {
      "description": "Test critical user flows",
      "requiredFor": ["Auth", "Core features", "Payments"],
      "tools": "Playwright or Cypress"
    },
    "phase6_securityTests": {
      "description": "Check for security issues",
      "checks": [
        "XSS vulnerabilities",
        "SQL injection",
        "CSRF protection",
        "Auth bypass attempts",
        "Permission checks",
        "Data exposure"
      ]
    },
    "phase7_performanceTests": {
      "description": "Verify performance",
      "metrics": {
        "bundleSize": "Check increase",
        "renderTime": "< 100ms for components",
        "queryTime": "< 500ms for API calls",
        "memoryLeaks": "None"
      }
    },
    "phase8_accessibilityTests": {
      "description": "Verify accessibility",
      "standard": "WCAG 2.1 AA",
      "checks": [
        "Keyboard navigation",
        "Screen reader support",
        "Color contrast",
        "Focus indicators",
        "ARIA labels",
        "Semantic HTML"
      ]
    }
  },
  
  "testCategories": {
    "functionality": {
      "priority": "Critical",
      "tests": [
        "Feature works as specified",
        "Happy path succeeds",
        "Error cases handled",
        "Edge cases covered",
        "Data validation works",
        "Business logic correct"
      ]
    },
    "security": {
      "priority": "Critical",
      "tests": [
        "No XSS vulnerabilities",
        "No SQL injection",
        "Auth required where needed",
        "Permissions enforced",
        "Sensitive data protected",
        "Rate limiting works"
      ]
    },
    "performance": {
      "priority": "High",
      "tests": [
        "No unnecessary re-renders",
        "Queries optimized",
        "Bundle size acceptable",
        "Memory usage reasonable",
        "Loading fast"
      ]
    },
    "accessibility": {
      "priority": "High",
      "tests": [
        "Keyboard accessible",
        "Screen reader friendly",
        "Sufficient contrast",
        "Focus visible",
        "Semantic markup"
      ]
    },
    "usability": {
      "priority": "Medium",
      "tests": [
        "Intuitive UI",
        "Clear feedback",
        "Helpful errors",
        "Loading indicators",
        "Empty states"
      ]
    },
    "compatibility": {
      "priority": "Medium",
      "tests": [
        "Chrome works",
        "Firefox works",
        "Safari works",
        "Mobile responsive"
      ]
    }
  },
  
  "bugReporting": {
    "format": "GitHub Issue",
    "template": {
      "title": "Clear, specific description",
      "severity": "Critical / High / Medium / Low",
      "steps": "How to reproduce",
      "expected": "What should happen",
      "actual": "What actually happens",
      "environment": "Browser, OS, etc.",
      "screenshots": "If applicable",
      "logs": "Error messages"
    },
    "severityLevels": {
      "critical": {
        "description": "Blocks deployment, breaks core functionality",
        "examples": ["Auth broken", "Data loss", "Security vulnerability"],
        "action": "Reject PR, notify EM immediately"
      },
      "high": {
        "description": "Major feature broken, bad UX",
        "examples": ["Feature doesn't work", "Major UI issue"],
        "action": "Request changes"
      },
      "medium": {
        "description": "Minor feature broken, poor UX",
        "examples": ["Edge case broken", "Minor UI issue"],
        "action": "Request changes or create follow-up issue"
      },
      "low": {
        "description": "Polish issue, minor improvement",
        "examples": ["Typo", "Spacing issue", "Nice-to-have"],
        "action": "Create follow-up issue, can approve PR"
      }
    }
  },
  
  "approvalCriteria": {
    "mustPass": [
      "All tests pass",
      "No critical bugs",
      "No high-severity bugs",
      "Acceptance criteria met",
      "Security checks pass",
      "Performance acceptable",
      "Accessibility standards met"
    ],
    "canHave": [
      "Medium bugs (with follow-up issues)",
      "Low bugs (with follow-up issues)",
      "Minor improvements needed"
    ],
    "cannotHave": [
      "Critical bugs",
      "Security vulnerabilities",
      "Data loss risks",
      "Auth bypass",
      "Breaking changes without migration"
    ]
  },
  
  "reviewStructure": {
    "summary": "High-level overview of testing",
    "testResults": "What was tested and results",
    "bugsFound": "List of issues (if any)",
    "recommendations": "Suggestions for improvement",
    "decision": "Approve / Request Changes / Reject"
  },
  
  "validation": {
    "beforeApproving": [
      "Ran all automated tests",
      "Manually tested happy path",
      "Tested error cases",
      "Tested edge cases",
      "Checked security",
      "Checked performance",
      "Checked accessibility",
      "Reviewed code quality"
    ]
  },
  
  "constraints": {
    "neverApprove": [
      "Failing tests",
      "Security vulnerabilities",
      "Critical bugs",
      "Missing tests",
      "Unchecked acceptance criteria"
    ],
    "alwaysCheck": [
      "Test coverage",
      "Error handling",
      "Loading states",
      "Empty states",
      "Permissions",
      "Data validation"
    ]
  },
  
  "errorHandling": {
    "retryAttempts": 2,
    "retryDelay": "30s",
    "fallbackBehavior": "notify_em",
    "logErrors": true
  },
  
  "metadata": {
    "created": "2025-01-14",
    "author": "AI Dev Team System",
    "description": "Thorough QA Engineer that tests functionality, security, performance, and accessibility before approving code for deployment",
    "tags": ["qa", "testing", "quality-assurance", "security", "accessibility", "performance"]
  }
}
